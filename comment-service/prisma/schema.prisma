generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Comment {
  id         Int       @id @default(autoincrement())
  postId     Int       @map("post_id")
  authorId   Int       @map("author_id")
  content    String    @db.Text
  parentId   Int?      @map("parent_id")
  isRichText Boolean   @default(false) @map("is_rich_text")
  createdAt  DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt  DateTime  @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  parent   Comment?  @relation("CommentReplies", fields: [parentId], references: [id], onDelete: Cascade)
  replies  Comment[] @relation("CommentReplies")

  @@map("comments")
  @@index([postId])
  @@index([authorId])
  @@index([parentId])
  @@index([createdAt])
}